<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="{{ page.description | default: site.description }}">
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
  <link rel="icon" type="image/x-icon" href="{{ site.baseurl }}/assets/images/favicon.ico">
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <div class="nav-brand">
        <a href="{{ site.baseurl }}/">
          <span class="brand-icon">⚛️</span>
          <span class="brand-text">MRF Compiler</span>
        </a>
      </div>
      <ul class="nav-menu" id="navMenu">
        <li><a href="{{ site.baseurl }}/">Home</a></li>
        <li><a href="{{ site.baseurl }}/installation">Installation</a></li>
        <li><a href="{{ site.baseurl }}/docs">Documentation</a></li>
        <li><a href="{{ site.baseurl }}/examples">Examples</a></li>
        <li><a href="https://github.com/Sapana-Micro-Software/MRFcompiler" target="_blank">GitHub</a></li>
      </ul>
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode" title="Toggle dark mode">
        <svg id="themeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
      </button>
      <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>

  <main class="main-content">
    {{ content }}
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>MRF Compiler</h4>
          <p>Convert graphical models to quantum circuits</p>
        </div>
        <div class="footer-section">
          <h4>Links</h4>
          <ul>
            <li><a href="{{ site.baseurl }}/installation">Installation</a></li>
            <li><a href="{{ site.baseurl }}/docs">Documentation</a></li>
            <li><a href="{{ site.baseurl }}/examples">Examples</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Resources</h4>
          <ul>
            <li><a href="{{ site.baseurl }}/docs/paper.pdf">Research Paper</a></li>
            <li><a href="{{ site.baseurl }}/docs/presentation.pdf">Presentation</a></li>
            <li><a href="{{ site.baseurl }}/docs/reference.pdf">Reference Manual</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Connect</h4>
          <ul>
            <li><a href="https://github.com/Sapana-Micro-Software/MRFcompiler" target="_blank">GitHub</a></li>
            <li><a href="https://github.com/Sapana-Micro-Software/MRFcompiler/issues" target="_blank">Issues</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Shyamal Suhana Chandra. All rights reserved.</p>
        <p style="margin-top: 0.5rem; font-size: 0.875rem;">For licensing, contact Sapana Micro Software at <a href="mailto:sapanamicrosoftware@duck.com" style="color: rgba(255, 255, 255, 0.8); text-decoration: underline;">sapanamicrosoftware@duck.com</a>.</p>
      </div>
    </div>
  </footer>

  <!-- Inline script to ensure copyCode is available for onclick handlers -->
  <script>
    // Make copyCode available immediately for inline onclick handlers
    window.copyCode = function(button) {
      const codeBlock = button.closest('.code-block');
      const codeElement = codeBlock ? codeBlock.querySelector('code') : null;
      
      if (codeElement) {
        const text = codeElement.textContent || '';
        const originalText = button.textContent || 'Copy';
        
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(text).then(function() {
            button.textContent = 'Copied!';
            button.style.background = '#10b981';
            setTimeout(function() {
              if (button) {
                button.textContent = originalText;
                button.style.background = '';
              }
            }, 2000);
          }).catch(function(err) {
            console.error('Failed to copy:', err);
            fallbackCopy(text, button, originalText);
          });
        } else {
          fallbackCopy(text, button, originalText);
        }
      }
    };
    
    function fallbackCopy(text, button, originalText) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand('copy');
        button.textContent = 'Copied!';
        button.style.background = '#10b981';
        setTimeout(function() {
          if (button) {
            button.textContent = originalText;
            button.style.background = '';
          }
        }, 2000);
      } catch (e) {
        console.error('Fallback copy failed:', e);
      }
      document.body.removeChild(textarea);
    }
  </script>
  <script type="module" src="{{ site.baseurl }}/assets/js/main.js"></script>
</body>
</html>
